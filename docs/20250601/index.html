<!DOCTYPE html>
<html lang="ja-jp">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>駅メモ！スポット 2025/06/01 15:00 - 2025/07/03 15:00 - Key to Infinity - 11周年イベント</title>
    
    <!-- 外部ライブラリ -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css"/>
    
    <!-- iOSデスクトップアイコン用 -->
    <link rel="apple-touch-icon" href="icon_180.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="11周年イベント">

    <!-- Androidデスクトップアイコン用 -->
    <link rel="icon" type="image/png" href="icon_32.png" sizes="32x32">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#ffffff">

    <!-- スタイルシート -->
    <style>
        /* ベーススタイル */
        html, body {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
        }
        
        #map {
            position: absolute;
            top: 0;
            bottom: 0;
            right: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        
        /* Leaflet スタイルのカスタマイズ */
        .leaflet-container { 
            font-size: 1rem; 
        }
        
        .leaflet-marker-icon {
            touch-action: none;
        }
        
        .leaflet-marker-icon:active {
            outline: none;
            -webkit-tap-highlight-color: rgba(0,0,0,0);
        }
        
        /* マーカーアニメーション */
        .blinking {
            animation: blink 1s infinite;
        }
        
        @keyframes blink {
            0% { opacity: 1; }
            50% { opacity: 0; }
            100% { opacity: 1; }
        }
        
        /* UI要素 */
        #marker-count {
            position: fixed;
            bottom: 3px;
            left: 10px;
            padding: 5px;
            font-size: 24px;
            font-weight: bold; 
            color: white;
            text-shadow: 1px 1px 4px rgba(0, 0, 0, 0.9);
            z-index: 1001;
        }
        
        #attribution {
            position: fixed;
            bottom: 0px;
            left: 0px;
            background-color: white;
            padding: 0px;
            border: 0px solid white;
            font-size: 10px;
            z-index: 1000;
        }
        
        #location-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: rgba(66, 133, 244, 0.7);
            border: none;
            outline: none;
            cursor: pointer;
            z-index: 1001;
            box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
            transition: all 0.3s cubic-bezier(.25,.8,.25,1);
        }
        
        #location-button:hover {
            background-color: rgba(51, 103, 214, 0.8);
            box-shadow: 0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23);
        }
        
        /* 追跡モード用アイコン */
        #location-button.following {
            background-color: rgba(0, 128, 0, 0.7);
        }
        
        #location-button.following:hover {
            background-color: rgba(0, 100, 0, 0.8);
        }
    </style>
</head>

<body>
    <!-- UI要素 -->
    <div id="attribution">
        駅情報は <a href="https://github.com/Seo-4d696b75/station_database/blob/main/README.md" target="_blank">駅データ</a> を利用しています
    </div>
    
    <div id="marker-count">
        <span id="red-markers-count" style="font-size: 48px;">0</span>/<span id="total-markers-count">0</span>
    </div>
    
    <div id="map"></div>
    
    <button id="location-button">
        <i class="fas fa-crosshairs" style="color: white; font-size: 24px;"></i>
    </button>

    <!-- 必要なライブラリをロード -->
    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"></script>

    <!-- マーカーデータ -->
    <script>
        var markerData = [{"lat": 43.012892, "lng": 142.879535, "name": "十勝清水", "name_kana": "とかちしみず", "radius": 0, "pt": 1, "coordinates": [[[142.724108, 42.90249], [142.734162, 42.965262], [143.088129, 43.204784], [143.075103, 43.168642], [143.028673, 43.074183], [142.955221, 43.015604], [142.724108, 42.90249]]]}, {"lat": 42.855781, "lng": 143.500797, "name": "十弗", "name_kana": "とおふつ", "radius": 0, "pt": 1, "coordinates": [[[143.416768, 42.84572], [143.35264, 42.671412], [143.601205, 42.917279], [143.624383, 42.995055], [143.416768, 42.84572]]]}, {"lat": 42.914667, "lng": 142.024478, "name": "十三里", "name_kana": "とみさと", "radius": 0, "pt": 1, "coordinates": [[[142.24257, 42.808793], [142.005548, 42.939402], [141.997801, 42.940549], [142.01675, 42.734057], [142.079525, 42.715248], [142.173273, 42.714394], [142.2192, 42.72452], [142.257513, 42.737221], [142.24257, 42.808793]]]}, {"lat": 43.545575, "lng": 141.874172, "name": "新十津川", "name_kana": "しんとつかわ", "radius": 0, "pt": 1, "coordinates": [[[141.679499, 43.604571], [141.639273, 43.624484], [141.655592, 43.640531], [141.774484, 43.684933], [141.862699, 43.618477], [141.897389, 43.523253], [141.885529, 43.51518], [141.679499, 43.604571]]]}, {"lat": 43.742021, "lng": 142.014721, "name": "北一已", "name_kana": "きたいちやん", "radius": 0, "pt": 1, "coordinates": [[[142.077093, 43.794224], [142.005512, 43.70246], [141.976405, 43.729832], [142.014687, 43.796227], [142.083728, 43.874675], [142.077093, 43.794224]]]}, {"lat": 43.238771, "lng": 144.545558, "name": "五十石", "name_kana": "ごじっこく", "radius": 0, "pt": 1, "coordinates": [[[144.571538, 43.167057], [144.440874, 43.315878], [144.537866, 43.309833], [144.67384, 43.166627], [144.609563, 43.145762], [144.571538, 43.167057]]]}, {"lat": 39.221186, "lng": 140.526287, "name": "十文字", "name_kana": "じゅうもんじ", "radius": 0, "pt": 1, "coordinates": [[[140.600123, 39.204838], [140.490186, 39.253728], [140.481185, 39.242127], [140.582728, 39.141401], [140.644047, 39.112475], [140.657914, 39.107166], [140.655687, 39.114178], [140.600123, 39.204838]]]}, {"lat": 40.551539, "lng": 139.941986, "name": "十二湖", "name_kana": "じゅうにこ", "radius": 0, "pt": 1, "coordinates": [[[139.888253, 40.527833], [139.906449, 40.552521], [140.003522, 40.606878], [140.023406, 40.604675], [140.090535, 40.590553], [140.096336, 40.584991], [139.888253, 40.527833]]]}, {"lat": 38.926514, "lng": 141.138177, "name": "一ノ関", "name_kana": "いちのせき", "radius": 0, "pt": 1, "coordinates": [[[141.054947, 38.918627], [141.146412, 38.892054], [141.172267, 38.948295], [141.054947, 38.918627]]]}, {"lat": 40.256069, "lng": 140.770716, "name": "十和田南", "name_kana": "とわだみなみ", "radius": 0, "pt": 1, "coordinates": [[[140.700263, 40.338726], [140.71604, 40.291243], [140.762563, 40.232004], [140.97931, 40.379467], [140.998945, 40.408719], [140.989189, 40.443766], [140.945507, 40.496438], [140.924362, 40.51537], [140.720269, 40.363066], [140.701683, 40.341825], [140.700263, 40.338726]]]}, {"lat": 40.21429, "lng": 140.668211, "name": "十二所", "name_kana": "じゅうにしょ", "radius": 0, "pt": 1, "coordinates": [[[140.642893, 40.281458], [140.67715, 40.065711], [140.706444, 40.131573], [140.693609, 40.202226], [140.642893, 40.281458]]]}, {"lat": 38.670658, "lng": 139.616182, "name": "五十川", "name_kana": "いらがわ", "radius": 0, "pt": 1, "coordinates": [[[138.38312, 39.388319], [138.044287, 39.600892], [138.78187, 39.459644], [138.868387, 39.413575], [139.244999, 39.196158], [139.335627, 39.140111], [139.689682, 38.594186], [138.38312, 39.388319]]]}, {"lat": 38.152259, "lng": 140.27867, "name": "かみのやま温泉", "name_kana": "かみのやまおんせん", "radius": 0, "pt": 1, "coordinates": [[[140.406365, 38.012955], [140.420341, 38.02631], [140.255809, 38.195234], [140.212737, 38.215003], [140.276937, 38.077123], [140.348579, 37.98577], [140.360093, 37.987659], [140.406365, 38.012955]]]}, {"lat": 37.715974, "lng": 139.353419, "name": "五十島", "name_kana": "いがしま", "radius": 0, "pt": 1, "coordinates": [[[139.27043, 37.55435], [139.270625, 37.556227], [139.309536, 37.683967], [139.394825, 37.812924], [139.324654, 37.554633], [139.27043, 37.55435]]]}, {"lat": 35.526254, "lng": 139.51669, "name": "十日市場(神奈川)", "name_kana": "とおかいちば", "radius": 0, "pt": 1, "coordinates": [[[139.504354, 35.523594], [139.501599, 35.512456], [139.505369, 35.49805], [139.515716, 35.495567], [139.532181, 35.528474], [139.523031, 35.534307], [139.513685, 35.534693], [139.504354, 35.523594]]]}, {"lat": 36.671385, "lng": 140.68623, "name": "十王", "name_kana": "じゅうおう", "radius": 0, "pt": 1, "coordinates": [[[140.537602, 36.699015], [140.541176, 36.74348], [140.54515, 36.758104], [140.566321, 36.786092], [140.576069, 36.781011], [140.819827, 36.610182], [140.537602, 36.699015]]]}, {"lat": 35.760321, "lng": 139.722233, "name": "十条(東京)", "name_kana": "じゅうじょう", "radius": 0, "pt": 1, "coordinates": [[[139.728673, 35.753714], [139.7295, 35.755481], [139.719317, 35.769007], [139.71436, 35.768641], [139.713773, 35.759016], [139.716449, 35.755425], [139.728216, 35.75325], [139.728673, 35.753714]]]}, {"lat": 35.373401, "lng": 140.365138, "name": "上総一ノ宮", "name_kana": "かずさいちのみや", "radius": 0, "pt": 1, "coordinates": [[[140.297763, 35.351505], [140.301823, 35.34772], [140.319727, 35.337874], [140.573235, 35.447663], [140.470401, 35.463158], [140.297763, 35.351505]]]}, {"lat": 35.916984, "lng": 140.545707, "name": "十二橋", "name_kana": "じゅうにきょう", "radius": 0, "pt": 1, "coordinates": [[[140.507363, 35.934549], [140.582505, 35.920343], [140.55319, 35.89755], [140.510511, 35.927315], [140.507363, 35.934549]]]}, {"lat": 35.763803, "lng": 139.726858, "name": "東十条", "name_kana": "ひがしじゅうじょう", "radius": 0, "pt": 1, "coordinates": [[[139.730478, 35.770571], [139.726724, 35.772095], [139.719317, 35.769007], [139.7295, 35.755481], [139.732321, 35.758354], [139.730478, 35.770571]]]}, {"lat": 36.315162, "lng": 139.518454, "name": "あしかがフラワーパーク", "name_kana": "あしかがふらわーぱーく", "radius": 0, "pt": 1, "coordinates": [[[139.526403, 36.28792], [139.525139, 36.287468], [139.496995, 36.299882], [139.487194, 36.318295], [139.486808, 36.320619], [139.486813, 36.32144], [139.506483, 36.394537], [139.516742, 36.381999], [139.526403, 36.28792]]]}, {"lat": 35.230153, "lng": 138.515802, "name": "十島", "name_kana": "とおしま", "radius": 0, "pt": 1, "coordinates": [[[138.525768, 35.270896], [138.433432, 35.138431], [138.444971, 35.138825], [138.498803, 35.153777], [138.526854, 35.194763], [138.525768, 35.270896]]]}, {"lat": 37.134562, "lng": 138.756188, "name": "十日町", "name_kana": "とおかまち", "radius": 0, "pt": 1, "coordinates": [[[138.68397, 37.197843], [138.690305, 37.195478], [138.755727, 37.152652], [138.771189, 37.115906], [138.76919, 37.097071], [138.684631, 37.157867], [138.68397, 37.197843]]]}, {"lat": 36.2596, "lng": 137.904136, "name": "一日市場", "name_kana": "ひといちば", "radius": 0, "pt": 1, "coordinates": [[[137.868662, 36.244539], [137.871036, 36.243486], [137.892429, 36.237688], [137.899531, 36.23788], [137.919597, 36.267414], [137.839436, 36.262877], [137.84284, 36.260135], [137.868662, 36.244539]]]}, {"lat": 35.645418, "lng": 137.617569, "name": "十二兼", "name_kana": "じゅうにかね", "radius": 0, "pt": 1, "coordinates": [[[137.688844, 35.607675], [137.669951, 35.630242], [137.450806, 35.777664], [137.450326, 35.776531], [137.572339, 35.629956], [137.688844, 35.607675]]]}, {"lat": 34.847911, "lng": 137.414549, "name": "三河一宮", "name_kana": "みかわいちのみや", "radius": 0, "pt": 1, "coordinates": [[[137.449828, 34.828754], [137.4617, 34.812839], [137.443387, 34.809506], [137.384763, 34.849661], [137.374356, 34.868421], [137.367139, 34.89245], [137.369208, 34.911182], [137.449828, 34.828754]]]}, {"lat": 36.541644, "lng": 136.598044, "name": "野々市(IRいしかわ鉄道)", "name_kana": "ののいち", "radius": 0, "pt": 1, "coordinates": [[[136.596199, 36.51906], [136.590865, 36.515545], [136.543735, 36.615999], [136.583164, 36.600472], [136.610046, 36.546603], [136.610079, 36.541745], [136.607757, 36.531514], [136.606942, 36.529438], [136.604595, 36.526611], [136.596199, 36.51906]]]}, {"lat": 36.08836, "lng": 137.247588, "name": "飛騨一ノ宮", "name_kana": "ひだいちのみや", "radius": 0, "pt": 1, "coordinates": [[[137.16929, 36.013824], [137.194492, 36.015563], [137.311325, 36.110067], [137.128703, 36.123053], [137.096778, 36.114803], [137.08709, 36.110071], [137.016235, 36.068371], [137.019088, 36.060847], [137.024513, 36.048358], [137.16611, 36.014062], [137.16929, 36.013824]]]}, {"lat": 36.013679, "lng": 136.2974, "name": "一乗谷", "name_kana": "いちじょうだに", "radius": 0, "pt": 1, "coordinates": [[[136.272935, 35.933925], [136.270887, 35.938727], [136.291941, 36.050112], [136.316481, 36.003006], [136.322863, 35.968602], [136.308488, 35.904219], [136.272935, 35.933925]]]}, {"lat": 35.51595, "lng": 135.896591, "name": "十村", "name_kana": "とむら", "radius": 0, "pt": 1, "coordinates": [[[135.869503, 35.543102], [135.886856, 35.496687], [135.947416, 35.440508], [135.969844, 35.483304], [135.869503, 35.543102]]]}, {"lat": 35.301765, "lng": 136.797567, "name": "尾張一宮", "name_kana": "おわりいちのみや", "radius": 0, "pt": 1, "coordinates": [[[136.795152, 35.305064], [136.807826, 35.317263], [136.830307, 35.328498], [136.832325, 35.323938], [136.835271, 35.309481], [136.834141, 35.296121], [136.801998, 35.294658], [136.795152, 35.305064]]]}, {"lat": 35.30154, "lng": 136.797225, "name": "名鉄一宮", "name_kana": "めいてついちのみや", "radius": 0, "pt": 1, "coordinates": [[[136.795152, 35.305064], [136.788138, 35.298959], [136.793393, 35.294055], [136.801998, 35.294658], [136.795152, 35.305064]]]}, {"lat": 34.76278, "lng": 136.49938, "name": "一身田", "name_kana": "いしんでん", "radius": 0, "pt": 1, "coordinates": [[[136.420883, 34.738069], [136.480313, 34.738926], [136.495931, 34.745], [136.502372, 34.750141], [136.511399, 34.77846], [136.502685, 34.793565], [136.406393, 34.756598], [136.403825, 34.753485], [136.405381, 34.751427], [136.420883, 34.738069]]]}, {"lat": 34.495884, "lng": 136.739797, "name": "五十鈴ヶ丘", "name_kana": "いすずがおか", "radius": 0, "pt": 1, "coordinates": [[[136.720351, 34.522103], [136.722867, 34.505705], [136.727498, 34.490046], [136.742227, 34.480573], [136.759165, 34.496488], [136.73924, 34.59102], [136.72078, 34.531209], [136.720351, 34.522103]]]}, {"lat": 34.654894, "lng": 136.436067, "name": "一志", "name_kana": "いちし", "radius": 0, "pt": 1, "coordinates": [[[136.421884, 34.653368], [136.422422, 34.661357], [136.442749, 34.653059], [136.431116, 34.635937], [136.421884, 34.653368]]]}, {"lat": 34.26244, "lng": 135.207116, "name": "六十谷", "name_kana": "むそた", "radius": 0, "pt": 1, "coordinates": [[[135.208968, 34.243767], [135.185543, 34.264012], [135.182147, 34.282661], [135.188363, 34.295035], [135.205375, 34.302196], [135.220525, 34.301136], [135.227277, 34.262194], [135.210379, 34.243555], [135.208968, 34.243767]]]}, {"lat": 35.192792, "lng": 132.440938, "name": "五十猛", "name_kana": "いそたけ", "radius": 0, "pt": 1, "coordinates": [[[131.432886, 36.190847], [131.85668, 35.678019], [132.460016, 35.138061], [132.44798, 35.259888], [132.156869, 35.794151], [128.73784, 40.000168], [129.577642, 38.521585], [130.418259, 37.456883], [131.432886, 36.190847]]]}, {"lat": 34.678838, "lng": 133.864083, "name": "備前一宮", "name_kana": "びぜんいちのみや", "radius": 0, "pt": 1, "coordinates": [[[133.847728, 34.707163], [133.858967, 34.660929], [133.866261, 34.658977], [133.869883, 34.661954], [133.886103, 34.68599], [133.893193, 34.709513], [133.891228, 34.730255], [133.856674, 34.755916], [133.847728, 34.707163]]]}, {"lat": 34.263885, "lng": 132.517523, "name": "かるが浜", "name_kana": "かるがはま", "radius": 0, "pt": 1, "coordinates": [[[132.414778, 34.085798], [132.529081, 34.271862], [132.499144, 34.275278], [132.465894, 34.269856], [132.407592, 34.253072], [132.404058, 34.250593], [132.398139, 34.229925], [132.386266, 34.176906], [132.385658, 34.173209], [132.412034, 34.089577], [132.414778, 34.085798]]]}, {"lat": 33.574881, "lng": 133.613621, "name": "一条橋", "name_kana": "いちじょうばし", "radius": 0, "pt": 1, "coordinates": [[[133.616099, 33.578624], [133.613396, 33.576256], [133.61256, 33.559845], [133.613185, 33.554828], [133.614965, 33.551086], [133.616099, 33.578624]]]}, {"lat": 33.578974, "lng": 133.577274, "name": "土佐一宮", "name_kana": "とさいっく", "radius": 0, "pt": 1, "coordinates": [[[133.57997, 33.569424], [133.582112, 33.570635], [133.598387, 33.633757], [133.600571, 33.6666], [133.583346, 33.685778], [133.576518, 33.691259], [133.56362, 33.697433], [133.569038, 33.569826], [133.570655, 33.569506], [133.573714, 33.569182], [133.578061, 33.569129], [133.579523, 33.569283], [133.57997, 33.569424]]]}, {"lat": 34.312801, "lng": 133.885305, "name": "八十場", "name_kana": "やそば", "radius": 0, "pt": 1, "coordinates": [[[133.901365, 34.410727], [133.872147, 34.392641], [133.870525, 34.273564], [133.878344, 34.273448], [133.884974, 34.274971], [133.92285, 34.402663], [133.901365, 34.410727]]]}, {"lat": 33.537809, "lng": 132.635859, "name": "五十崎", "name_kana": "いかざき", "radius": 0, "pt": 1, "coordinates": [[[132.618596, 33.563754], [132.645401, 33.414339], [132.679121, 33.413417], [132.77095, 33.415808], [132.780806, 33.417742], [132.618596, 33.563754]]]}, {"lat": 33.234869, "lng": 132.855827, "name": "十川(高知)", "name_kana": "とおかわ", "radius": 0, "pt": 1, "coordinates": [[[132.853563, 33.162766], [132.977177, 33.50959], [132.898357, 33.482204], [132.852677, 33.459859], [132.792109, 33.419481], [132.786859, 33.368682], [132.796473, 33.270935], [132.849672, 33.167754], [132.853563, 33.162766]]]}, {"lat": 31.718448, "lng": 131.033833, "name": "五十市", "name_kana": "いそいち", "radius": 0, "pt": 1, "coordinates": [[[131.071745, 31.597186], [130.975685, 31.572142], [131.020821, 31.75734], [131.04032, 31.744942], [131.071745, 31.597186]]]}, {"lat": 33.534294, "lng": 130.168236, "name": "一貴山", "name_kana": "いきさん", "radius": 0, "pt": 1, "coordinates": [[[130.246516, 33.45237], [130.261253, 33.423407], [130.261772, 33.419614], [130.226362, 33.415277], [130.107241, 33.59483], [130.105644, 33.598773], [130.209282, 33.506178], [130.224269, 33.489751], [130.246516, 33.45237]]]}, {"lat": 33.65607, "lng": 130.835781, "name": "一本松(福岡)", "name_kana": "いっぽんまつ", "radius": 0, "pt": 1, "coordinates": [[[130.84289, 33.659331], [130.836021, 33.649936], [130.820417, 33.660892], [130.819986, 33.663914], [130.822093, 33.679876], [130.822632, 33.682154], [130.84289, 33.659331]]]}, {"lat": 32.250231, "lng": 130.652399, "name": "一勝地", "name_kana": "いっしょうち", "radius": 0, "pt": 1, "coordinates": [[[130.641279, 32.286636], [130.592626, 32.16433], [130.62147, 32.15772], [130.688355, 32.312918], [130.673359, 32.312127], [130.641279, 32.286636]]]}, {"lat": 35.96412, "lng": 139.766219, "name": "一ノ割", "name_kana": "いちのわり", "radius": 0, "pt": 1, "coordinates": [[[139.744511, 35.949509], [139.745146, 35.95607], [139.749595, 35.963694], [139.76521, 35.977256], [139.786207, 35.961881], [139.744511, 35.949509]]]}, {"lat": 35.872051, "lng": 139.925898, "name": "流山おおたかの森", "name_kana": "ながれやまおおたかのもり", "radius": 0, "pt": 1, "coordinates": [[[139.935479, 35.887234], [139.909973, 35.86976], [139.928222, 35.858628], [139.938413, 35.883529], [139.935479, 35.887234]]]}, {"lat": 35.94008, "lng": 139.370062, "name": "一本松(埼玉)", "name_kana": "いっぽんまつ", "radius": 0, "pt": 1, "coordinates": [[[139.353492, 35.981269], [139.366623, 35.97025], [139.391505, 35.935373], [139.392929, 35.929137], [139.385903, 35.921328], [139.372303, 35.920952], [139.357527, 35.945175], [139.353492, 35.981269]]]}, {"lat": 35.72217, "lng": 139.480039, "name": "一橋学園", "name_kana": "ひとつばしがくえん", "radius": 0, "pt": 1, "coordinates": [[[139.470424, 35.719116], [139.472674, 35.715759], [139.494116, 35.712838], [139.497474, 35.717101], [139.496845, 35.722379], [139.48499, 35.729152], [139.473356, 35.724648], [139.470556, 35.721791], [139.470424, 35.719116]]]}, {"lat": 35.517094, "lng": 139.481684, "name": "すずかけ台", "name_kana": "すずかけだい", "radius": 0, "pt": 1, "coordinates": [[[139.486072, 35.493828], [139.471489, 35.523468], [139.474934, 35.525125], [139.494693, 35.518602], [139.501599, 35.512456], [139.505369, 35.49805], [139.495884, 35.494015], [139.486072, 35.493828]]]}, {"lat": 35.672765, "lng": 139.724159, "name": "青山一丁目", "name_kana": "あおやまいっちょうめ", "radius": 0, "pt": 1, "coordinates": [[[139.731256, 35.672915], [139.731296, 35.671697], [139.722077, 35.668636], [139.719769, 35.675135], [139.728094, 35.679065], [139.729443, 35.678406], [139.731256, 35.672915]]]}, {"lat": 35.67435, "lng": 139.767045, "name": "銀座一丁目", "name_kana": "ぎんざいっちょうめ", "radius": 0, "pt": 1, "coordinates": [[[139.766725, 35.677891], [139.766421, 35.67785], [139.765046, 35.673768], [139.766494, 35.671879], [139.770082, 35.672032], [139.769509, 35.674468], [139.766725, 35.677891]]]}, {"lat": 35.665595, "lng": 139.739, "name": "六本木一丁目", "name_kana": "ろっぽんぎいっちょうめ", "radius": 0, "pt": 1, "coordinates": [[[139.740087, 35.65977], [139.743253, 35.667112], [139.742904, 35.668796], [139.740376, 35.669558], [139.733486, 35.668969], [139.736618, 35.66039], [139.740087, 35.65977]]]}, {"lat": 35.654682, "lng": 139.737051, "name": "麻布十番", "name_kana": "あざぶじゅうばん", "radius": 0, "pt": 1, "coordinates": [[[139.740087, 35.65977], [139.740104, 35.659754], [139.74067, 35.648277], [139.740139, 35.647651], [139.730166, 35.650146], [139.729321, 35.655371], [139.736618, 35.66039], [139.740087, 35.65977]]]}, {"lat": 35.466744, "lng": 139.415851, "name": "かしわ台", "name_kana": "かしわだい", "radius": 0, "pt": 1, "coordinates": [[[139.417065, 35.484121], [139.43303, 35.439656], [139.433095, 35.43924], [139.421583, 35.422758], [139.419519, 35.424482], [139.400326, 35.46533], [139.417005, 35.484107], [139.417065, 35.484121]]]}, {"lat": 35.01367, "lng": 137.02551, "name": "一ツ木", "name_kana": "ひとつぎ", "radius": 0, "pt": 1, "coordinates": [[[137.005012, 35.012764], [137.005899, 35.010757], [137.013256, 35.005322], [137.029324, 35.003802], [137.04629, 35.03586], [137.005012, 35.012764]]]}, {"lat": 35.307603, "lng": 136.791948, "name": "西一宮", "name_kana": "にしいちのみや", "radius": 0, "pt": 1, "coordinates": [[[136.777829, 35.302277], [136.776375, 35.303251], [136.781202, 35.310642], [136.807826, 35.317263], [136.795152, 35.305064], [136.788138, 35.298959], [136.777829, 35.302277]]]}, {"lat": 35.400098, "lng": 136.889307, "name": "二十軒", "name_kana": "にじっけん", "radius": 0, "pt": 1, "coordinates": [[[136.894631, 35.403784], [136.885643, 35.432338], [136.882763, 35.415567], [136.882564, 35.370057], [136.890009, 35.371521], [136.899962, 35.378067], [136.894631, 35.403784]]]}, {"lat": 35.332959, "lng": 136.721897, "name": "不破一色", "name_kana": "ふわいしき", "radius": 0, "pt": 1, "coordinates": [[[136.72225, 35.309675], [136.70661, 35.348614], [136.740372, 35.325704], [136.740465, 35.323966], [136.735733, 35.302448], [136.730569, 35.299135], [136.72225, 35.309675]]]}, {"lat": 34.476433, "lng": 136.727287, "name": "五十鈴川", "name_kana": "いすずがわ", "radius": 0, "pt": 1, "coordinates": [[[136.743972, 34.411717], [136.732711, 34.398146], [136.663056, 34.346956], [136.672696, 34.421206], [136.685184, 34.442499], [136.727498, 34.490046], [136.742227, 34.480573], [136.743972, 34.411717]]]}, {"lat": 34.675408, "lng": 135.707992, "name": "一分", "name_kana": "いちぶ", "radius": 0, "pt": 1, "coordinates": [[[135.697723, 34.679305], [135.696938, 34.677912], [135.693705, 34.669297], [135.730287, 34.672161], [135.723853, 34.681334], [135.719735, 34.681963], [135.697723, 34.679305]]]}, {"lat": 34.97398, "lng": 135.752413, "name": "十条(近畿日本鉄道)", "name_kana": "じゅうじょう", "radius": 0, "pt": 1, "coordinates": [[[135.75515, 34.969621], [135.739217, 34.969239], [135.741952, 34.97722], [135.755775, 34.976897], [135.756661, 34.975633], [135.75515, 34.969621]]]}, {"lat": 34.55607, "lng": 135.50579, "name": "なかもず", "name_kana": "なかもず", "radius": 0, "pt": 1, "coordinates": [[[135.503908, 34.54614], [135.506113, 34.564325], [135.50645, 34.564851], [135.513982, 34.558843], [135.503908, 34.54614]]]}, {"lat": 34.720226, "lng": 135.48248, "name": "十三", "name_kana": "じゅうそう", "radius": 0, "pt": 1, "coordinates": [[[135.491808, 34.719067], [135.480837, 34.708044], [135.480352, 34.707958], [135.472538, 34.722135], [135.480974, 34.72881], [135.488508, 34.728523], [135.492074, 34.719493], [135.491808, 34.719067]]]}, {"lat": 43.070221, "lng": 141.314093, "name": "二十四軒", "name_kana": "にじゅうよんけん", "radius": 0, "pt": 1, "coordinates": [[[141.323205, 43.065669], [141.30438, 43.064852], [141.31053, 43.075778], [141.315172, 43.078501], [141.322904, 43.076001], [141.323205, 43.065669]]]}, {"lat": 41.763998, "lng": 140.718513, "name": "十字街", "name_kana": "じゅうじがい", "radius": 0, "pt": 1, "coordinates": [[[140.717244, 41.769951], [140.71298, 41.760296], [140.713998, 41.760262], [140.721012, 41.763361], [140.717244, 41.769951]]]}, {"lat": 40.817526, "lng": 140.457044, "name": "十川(青森)", "name_kana": "とがわ", "radius": 0, "pt": 1, "coordinates": [[[140.411718, 40.859233], [140.411959, 40.858123], [140.472431, 40.792152], [140.466669, 40.826707], [140.457979, 40.842559], [140.433829, 40.854962], [140.411718, 40.859233]]]}, {"lat": 40.623747, "lng": 141.214062, "name": "十和田市", "name_kana": "とわだし", "radius": 0, "pt": 1, "coordinates": [[[140.989189, 40.443766], [140.945507, 40.496438], [141.205315, 40.670721], [141.232671, 40.578944], [141.247928, 40.514375], [141.228262, 40.50585], [140.989189, 40.443766]]]}, {"lat": 40.210092, "lng": 141.297419, "name": "一戸", "name_kana": "いちのへ", "radius": 0, "pt": 1, "coordinates": [[[141.253277, 40.177546], [141.178183, 40.209497], [141.379776, 40.254797], [141.432471, 40.259216], [141.526999, 40.253778], [141.527417, 40.250002], [141.253277, 40.177546]]]}, {"lat": 40.323503, "lng": 141.303943, "name": "金田一温泉", "name_kana": "きんたいちおんせん", "radius": 0, "pt": 1, "coordinates": [[[141.524817, 40.280869], [141.527988, 40.272284], [141.528989, 40.268405], [141.526999, 40.253778], [141.432471, 40.259216], [141.257438, 40.317736], [141.357915, 40.368811], [141.376884, 40.368675], [141.425098, 40.352211], [141.522003, 40.287475], [141.522819, 40.28569], [141.524817, 40.280869]]]}, {"lat": 39.686895, "lng": 141.94264, "name": "一の渡", "name_kana": "いちのわたり", "radius": 0, "pt": 1, "coordinates": [[[141.898065, 39.675874], [141.949314, 39.663981], [141.975972, 39.666163], [142.015885, 39.679005], [141.961878, 39.705335], [141.884461, 39.683703], [141.884801, 39.683214], [141.898065, 39.675874]]]}, {"lat": 40.096833, "lng": 141.824167, "name": "十府ヶ浦海岸", "name_kana": "とふがうらかいがん", "radius": 0, "pt": 1, "coordinates": [[[141.914397, 40.131395], [141.887217, 40.110036], [141.761806, 40.068185], [141.789398, 40.097834], [141.914397, 40.131395]]]}, {"lat": 38.234085, "lng": 140.887402, "name": "長町一丁目", "name_kana": "ながまちいっちょうめ", "radius": 0, "pt": 1, "coordinates": [[[140.875411, 38.236905], [140.878109, 38.238002], [140.900718, 38.237036], [140.910005, 38.225912], [140.879895, 38.231762], [140.875411, 38.236905]]]}, {"lat": 38.259611, "lng": 140.872083, "name": "青葉通一番町", "name_kana": "あおばどおりいちばんちょう", "radius": 0, "pt": 1, "coordinates": [[[140.867801, 38.262498], [140.872309, 38.263031], [140.875386, 38.259686], [140.876163, 38.255292], [140.869025, 38.247066], [140.867801, 38.262498]]]}, {"lat": 35.686055, "lng": 139.882934, "name": "一之江", "name_kana": "いちのえ", "radius": 0, "pt": 1, "coordinates": [[[139.891502, 35.677746], [139.881896, 35.672849], [139.874649, 35.676223], [139.871482, 35.702397], [139.880289, 35.70958], [139.880295, 35.70958], [139.880567, 35.709297], [139.894226, 35.681696], [139.891502, 35.677746]]]}, {"lat": 35.733659, "lng": 139.788988, "name": "荒川一中前", "name_kana": "あらかわいっちゅうまえ", "radius": 0, "pt": 1, "coordinates": [[[139.793094, 35.737924], [139.788985, 35.730867], [139.784657, 35.728189], [139.790035, 35.738901], [139.790435, 35.739248], [139.792545, 35.738422], [139.793094, 35.737924]]]}, {"lat": 35.747374, "lng": 139.735376, "name": "滝野川一丁目", "name_kana": "たきのがわいっちょうめ", "radius": 0, "pt": 1, "coordinates": [[[139.728216, 35.75325], [139.72812, 35.752206], [139.729196, 35.75035], [139.738003, 35.742389], [139.738917, 35.747039], [139.730547, 35.752882], [139.728673, 35.753714], [139.728216, 35.75325]]]}, {"lat": 36.132056, "lng": 139.251472, "name": "ふかや花園", "name_kana": "ふかやはなぞの", "radius": 0, "pt": 1, "coordinates": [[[139.267104, 36.103047], [139.23769, 36.123376], [139.233712, 36.160628], [139.236604, 36.167356], [139.241485, 36.168274], [139.268043, 36.102701], [139.267104, 36.103047]]]}, {"lat": 35.9109, "lng": 139.957533, "name": "柏たなか", "name_kana": "かしわたなか", "radius": 0, "pt": 1, "coordinates": [[[139.975966, 35.896013], [139.932783, 35.90832], [139.931748, 35.911913], [139.934632, 35.954411], [139.935478, 35.95713], [139.957634, 35.945809], [139.976096, 35.929694], [139.988187, 35.90658], [139.975966, 35.896013]]]}, {"lat": 36.253053, "lng": 138.863924, "name": "上州一ノ宮", "name_kana": "じょうしゅういちのみや", "radius": 0, "pt": 1, "coordinates": [[[138.841851, 36.271023], [138.90176, 36.155566], [138.901134, 36.167794], [138.899961, 36.173532], [138.888675, 36.216083], [138.884685, 36.226639], [138.858446, 36.276247], [138.841851, 36.271023]]]}, {"lat": 35.782343, "lng": 139.975707, "name": "くぬぎ山", "name_kana": "くぬぎやま", "radius": 0, "pt": 1, "coordinates": [[[139.982935, 35.77627], [139.965759, 35.781347], [139.96417, 35.785445], [139.965676, 35.786445], [139.985964, 35.786126], [139.982935, 35.77627]]]}, {"lat": 35.538881, "lng": 138.887489, "name": "十日市場(山梨)", "name_kana": "とおかいちば", "radius": 0, "pt": 1, "coordinates": [[[138.882098, 35.564894], [138.880843, 35.566267], [138.874819, 35.565884], [138.89056, 35.462481], [138.900105, 35.435046], [138.904673, 35.425754], [138.932013, 35.442514], [138.882098, 35.564894]]]}, {"lat": 36.440584, "lng": 138.188204, "name": "テクノさかき", "name_kana": "てくのさかき", "radius": 0, "pt": 1, "coordinates": [[[138.150513, 36.404229], [138.127932, 36.411014], [138.131452, 36.434079], [138.246753, 36.471255], [138.167222, 36.401706], [138.150513, 36.404229]]]}, {"lat": 36.781235, "lng": 137.0785, "name": "第一イン新湊 クロスベイ前", "name_kana": "だいいちいんしんみなと くろすべいまえ", "radius": 0, "pt": 1, "coordinates": [[[137.09452, 36.813712], [137.075192, 36.764286], [137.070251, 36.756074], [137.070196, 36.7561], [137.068038, 36.766854], [137.081103, 36.7986], [137.095815, 36.821637], [137.09452, 36.813712]]]}, {"lat": 36.498879, "lng": 136.615684, "name": "四十万", "name_kana": "しじま", "radius": 0, "pt": 1, "coordinates": [[[136.700465, 36.489587], [136.680564, 36.48612], [136.584343, 36.501055], [136.589151, 36.509604], [136.692619, 36.493678], [136.700465, 36.489587]]]}, {"lat": 35.989143, "lng": 136.193805, "name": "三十八社", "name_kana": "さんじゅうはっしゃ", "radius": 0, "pt": 1, "coordinates": [[[136.160962, 36.009701], [136.196632, 35.980452], [136.215678, 35.985467], [136.160962, 36.009701]]]}, {"lat": 36.048683, "lng": 136.216623, "name": "赤十字前", "name_kana": "せきじゅうじまえ", "radius": 0, "pt": 1, "coordinates": [[[136.219681, 36.044068], [136.203364, 36.047083], [136.223437, 36.053634], [136.235933, 36.047194], [136.235165, 36.046333], [136.219681, 36.044068]]]}, {"lat": 34.818045, "lng": 137.889145, "name": "遠江一宮", "name_kana": "とおとうみいちのみや", "radius": 0, "pt": 1, "coordinates": [[[137.859336, 34.769311], [137.883939, 34.768372], [137.904499, 34.778245], [137.891889, 34.862809], [137.89109, 34.865627], [137.859336, 34.769311]]]}, {"lat": 34.707477, "lng": 137.732845, "name": "第一通り", "name_kana": "だいいちどおり", "radius": 0, "pt": 1, "coordinates": [[[137.70237, 34.713168], [137.704023, 34.708172], [137.733255, 34.705382], [137.738768, 34.708304], [137.70237, 34.713168]]]}, {"lat": 34.757275, "lng": 137.757327, "name": "さぎの宮", "name_kana": "さぎのみや", "radius": 0, "pt": 1, "coordinates": [[[137.716837, 34.775953], [137.725578, 34.76922], [137.774675, 34.740613], [137.78734, 34.747499], [137.72527, 34.782431], [137.716837, 34.775953]]]}, {"lat": 35.168231, "lng": 136.995927, "name": "一社", "name_kana": "いっしゃ", "radius": 0, "pt": 1, "coordinates": [[[137.000239, 35.147248], [136.98308, 35.179117], [136.983988, 35.183051], [136.988573, 35.185941], [136.99366, 35.187071], [137.01257, 35.148192], [137.009367, 35.147418], [137.000239, 35.147248]]]}, {"lat": 35.143234, "lng": 136.955375, "name": "いりなか", "name_kana": "いりなか", "radius": 0, "pt": 1, "coordinates": [[[136.960553, 35.141258], [136.957266, 35.13673], [136.945126, 35.137544], [136.957354, 35.15243], [136.95929, 35.150462], [136.960553, 35.141258]]]}, {"lat": 35.395737, "lng": 136.660945, "name": "十九条", "name_kana": "じゅうくじょう", "radius": 0, "pt": 1, "coordinates": [[[136.67753, 35.388462], [136.677239, 35.404168], [136.630682, 35.40531], [136.630779, 35.401652], [136.640833, 35.394617], [136.67753, 35.388462]]]}, {"lat": 34.758717, "lng": 136.512126, "name": "東一身田", "name_kana": "ひがしいしんでん", "radius": 0, "pt": 1, "coordinates": [[[136.502372, 34.750141], [136.511399, 34.77846], [136.517095, 34.773642], [136.521728, 34.765722], [136.50936, 34.751074], [136.502372, 34.750141]]]}, {"lat": 34.748194, "lng": 136.137, "name": "四十九", "name_kana": "しじゅく", "radius": 0, "pt": 1, "coordinates": [[[136.163963, 34.748446], [136.088708, 34.728693], [136.089026, 34.730044], [136.11947, 34.750078], [136.173489, 34.753507], [136.163963, 34.748446]]]}, {"lat": 35.044247, "lng": 135.787416, "name": "一乗寺", "name_kana": "いちじょうじ", "radius": 0, "pt": 1, "coordinates": [[[135.820536, 35.03164], [135.819811, 35.028548], [135.813217, 35.028036], [135.779645, 35.04431], [135.783576, 35.049774], [135.820536, 35.03164]]]}, {"lat": 35.319394, "lng": 135.105779, "name": "荒河かしの木台", "name_kana": "あらがかしのきだい", "radius": 0, "pt": 1, "coordinates": [[[135.116436, 35.315006], [135.084416, 35.308009], [135.089897, 35.325623], [135.099685, 35.327755], [135.12223, 35.319276], [135.116436, 35.315006]]]}, {"lat": 35.60685, "lng": 134.919769, "name": "かぶと山", "name_kana": "かぶとやま", "radius": 0, "pt": 1, "coordinates": [[[134.967603, 35.602238], [134.903468, 35.626149], [134.925466, 35.505056], [134.944595, 35.475185], [134.988557, 35.477167], [135.001755, 35.560695], [134.967603, 35.602238]]]}, {"lat": 34.972168, "lng": 135.759623, "name": "十条(京都市交通局)", "name_kana": "じゅうじょう", "radius": 0, "pt": 1, "coordinates": [[[135.757009, 34.967771], [135.75515, 34.969621], [135.756661, 34.975633], [135.764435, 34.975587], [135.764936, 34.97203], [135.763062, 34.96638], [135.757009, 34.967771]]]}, {"lat": 34.879599, "lng": 135.419888, "name": "一の鳥居", "name_kana": "いちのとりい", "radius": 0, "pt": 1, "coordinates": [[[135.457648, 34.871546], [135.452454, 34.865995], [135.41015, 34.87619], [135.425646, 34.888615], [135.427023, 34.888967], [135.457648, 34.871546]]]}, {"lat": 35.464605, "lng": 132.882819, "name": "一畑口", "name_kana": "いちばたぐち", "radius": 0, "pt": 1, "coordinates": [[[132.887539, 35.439416], [132.899091, 35.502633], [132.897977, 35.525352], [132.851951, 35.83007], [132.533931, 37.698698], [130.79803, 45.038618], [128.353405, 47.55717], [132.546268, 36.082732], [132.797227, 35.5964], [132.887539, 35.439416]]]}, {"lat": 34.656245, "lng": 133.942759, "name": "東山・おかでんミュージアム駅", "name_kana": "ひがしやま・おかでんみゅーじあむえき", "radius": 0, "pt": 1, "coordinates": [[[133.941028, 34.628862], [133.940763, 34.658711], [133.943225, 34.668269], [133.950092, 34.669748], [133.975341, 34.655649], [133.975342, 34.655647], [133.985618, 34.586245], [133.973475, 34.586214], [133.952324, 34.590174], [133.950636, 34.593095], [133.941028, 34.628862]]]}, {"lat": 34.397438, "lng": 132.447138, "name": "十日市町", "name_kana": "とうかいちまち", "radius": 0, "pt": 1, "coordinates": [[[132.44503, 34.396645], [132.448569, 34.39555], [132.449065, 34.3989], [132.442379, 34.400688], [132.443084, 34.398607], [132.44503, 34.396645]]]}, {"lat": 34.390302, "lng": 132.474067, "name": "段原一丁目", "name_kana": "だんばらいっちょうめ", "radius": 0, "pt": 1, "coordinates": [[[132.485993, 34.376306], [132.471288, 34.389775], [132.47357, 34.392129], [132.486157, 34.38786], [132.485993, 34.376306]]]}, {"lat": 34.406848, "lng": 132.449949, "name": "横川一丁目", "name_kana": "よこがわいっちょうめ", "radius": 0, "pt": 1, "coordinates": [[[132.444239, 34.409409], [132.440269, 34.410007], [132.436546, 34.409096], [132.454139, 34.40431], [132.454616, 34.407278], [132.444239, 34.409409]]]}, {"lat": 34.170107, "lng": 132.135704, "name": "守内かさ神", "name_kana": "しゅうちかさがみ", "radius": 0, "pt": 1, "coordinates": [[[132.107483, 34.26194], [132.108885, 34.278847], [132.112107, 34.288213], [132.151812, 34.245215], [132.163235, 34.224088], [132.143222, 34.16885], [132.128131, 34.144731], [132.122998, 34.141034], [132.107483, 34.26194]]]}, {"lat": 34.283027, "lng": 134.022561, "name": "一宮", "name_kana": "いちのみや", "radius": 0, "pt": 1, "coordinates": [[[134.01896, 34.311518], [134.013096, 34.257908], [134.020132, 34.239557], [134.030456, 34.29659], [134.022268, 34.308596], [134.019077, 34.311598], [134.01896, 34.311518]]]}, {"lat": 33.848115, "lng": 132.772383, "name": "赤十字病院前", "name_kana": "せきじゅうじびょういんまえ", "radius": 0, "pt": 1, "coordinates": [[[132.774898, 33.868785], [132.776302, 33.861395], [132.772917, 33.845552], [132.771597, 33.844438], [132.770522, 33.844825], [132.771355, 33.860877], [132.771746, 33.86197], [132.774898, 33.868785]]]}, {"lat": 33.846737, "lng": 132.775502, "name": "上一万", "name_kana": "かみいちまん", "radius": 0, "pt": 1, "coordinates": [[[132.773711, 33.845785], [132.777253, 33.849758], [132.777916, 33.845494], [132.773711, 33.845785]]]}, {"lat": 33.546089, "lng": 133.710352, "name": "よしかわ", "name_kana": "よしかわ", "radius": 0, "pt": 1, "coordinates": [[[133.672405, 33.529255], [133.644682, 33.48456], [133.637538, 33.468805], [133.635021, 33.445897], [133.636811, 33.395729], [133.73105, 33.570745], [133.732236, 33.575343], [133.672405, 33.529255]]]}, {"lat": 33.539893, "lng": 133.721859, "name": "あかおか", "name_kana": "あかおか", "radius": 0, "pt": 1, "coordinates": [[[133.635981, 33.149916], [133.714328, 33.396699], [133.72596, 33.465173], [133.73105, 33.570745], [133.636811, 33.395729], [133.635981, 33.149916]]]}, {"lat": 33.558377, "lng": 133.557099, "name": "知寄町一丁目", "name_kana": "ちよりちょういっちょうめ", "radius": 0, "pt": 1, "coordinates": [[[133.557438, 33.549508], [133.559761, 33.568134], [133.556094, 33.56868], [133.554712, 33.551161], [133.555795, 33.550392], [133.557438, 33.549508]]]}, {"lat": 33.557324, "lng": 133.525417, "name": "上町一丁目", "name_kana": "かみまちいっちょうめ", "radius": 0, "pt": 1, "coordinates": [[[133.526432, 33.563019], [133.52608, 33.563191], [133.52398, 33.562047], [133.524285, 33.524978], [133.524765, 33.525798], [133.526668, 33.529544], [133.526926, 33.530098], [133.526432, 33.563019]]]}, {"lat": 33.556635, "lng": 133.51323, "name": "旭町一丁目", "name_kana": "あさひまちいっちょうめ", "radius": 0, "pt": 1, "coordinates": [[[133.511093, 33.558195], [133.513736, 33.563922], [133.514371, 33.5634], [133.519481, 33.526288], [133.520362, 33.517711], [133.518995, 33.51437], [133.511093, 33.558195]]]}, {"lat": 33.550108, "lng": 133.54624, "name": "桟橋通一丁目", "name_kana": "さんばしどおりいっちょうめ", "radius": 0, "pt": 1, "coordinates": [[[133.5486, 33.554289], [133.550469, 33.553872], [133.551533, 33.55297], [133.53135, 33.539175], [133.533021, 33.543077], [133.533966, 33.544809], [133.5486, 33.554289]]]}, {"lat": 33.727366, "lng": 130.72455, "name": "あかぢ", "name_kana": "あかぢ", "radius": 0, "pt": 1, "coordinates": [[[130.733939, 33.732761], [130.720818, 33.733169], [130.718423, 33.711835], [130.722549, 33.709889], [130.733939, 33.732761]]]}, {"lat": 32.214551, "lng": 130.839915, "name": "一武", "name_kana": "いちぶ", "radius": 0, "pt": 1, "coordinates": [[[130.844513, 32.157455], [130.873775, 32.126676], [130.884078, 32.127264], [130.895538, 32.129208], [130.809261, 32.297877], [130.807789, 32.271207], [130.81356, 32.235785], [130.844513, 32.157455]]]}, {"lat": 32.231011, "lng": 130.873629, "name": "おかどめ幸福", "name_kana": "おかどめこうふく", "radius": 0, "pt": 1, "coordinates": [[[130.821169, 32.389137], [130.804497, 32.366323], [130.80514, 32.361009], [130.909484, 32.133305], [130.869123, 32.290339], [130.821169, 32.389137]]]}, {"lat": 32.236191, "lng": 130.893783, "name": "あさぎり", "name_kana": "あさぎり", "radius": 0, "pt": 1, "coordinates": [[[130.983854, 32.132205], [130.869123, 32.290339], [130.909484, 32.133305], [130.91056, 32.13016], [130.940628, 32.126859], [130.983854, 32.132205]]]}, {"lat": 31.546439, "lng": 130.539068, "name": "宇宿一丁目", "name_kana": "うすきいっちょうめ", "radius": 0, "pt": 1, "coordinates": [[[130.530541, 31.553885], [130.537131, 31.546085], [130.660946, 31.467269], [130.665578, 31.466667], [130.679433, 31.466306], [130.530541, 31.553885]]]}, {"lat": 33.960627, "lng": 130.967347, "name": "関門海峡めかり", "name_kana": "かんもんかいきょうめかり", "radius": 0, "pt": 1, "coordinates": [[[130.952476, 33.980903], [130.947132, 33.970707], [130.973744, 33.953021], [131.06907, 33.937758], [131.069503, 33.942735], [130.979087, 33.992326], [130.952476, 33.980903]]]}, {"lat": 40.7198, "lng": 141.154, "name": "七戸十和田", "name_kana": "しちのへとわだ", "radius": 0, "pt": 1, "coordinates": [[[141.151289, 40.732206], [141.153762, 40.73066], [141.15896, 40.71141], [141.156888, 40.706916], [140.928437, 40.596779], [140.962502, 40.719939], [140.968041, 40.721324], [141.047103, 40.731127], [141.13266, 40.734671], [141.151289, 40.732206]]]}, {"lat": 35.318972, "lng": 139.242028, "name": "一色", "name_kana": "いっしき", "radius": 0, "pt": 1, "coordinates": [[[139.266697, 35.340636], [139.21313, 35.310849], [139.226798, 35.300422], [139.276418, 35.335395], [139.266697, 35.340636]]]}, {"lat": 36.572469, "lng": 140.014653, "name": "かしの森公園前", "name_kana": "かしのもりこうえんまえ", "radius": 0, "pt": 1, "coordinates": [[[140.009711, 36.570099], [140.007592, 36.573055], [140.069924, 36.600097], [140.07298, 36.597143], [140.075976, 36.59282], [140.064175, 36.560077], [140.055578, 36.548652], [140.009711, 36.570099]]]}, {"lat": 39.007863, "lng": 141.627136, "name": "奇跡の一本松", "name_kana": "きせきのいっぽんまつ", "radius": 0, "pt": 1, "coordinates": [[[141.649285, 38.986696], [141.62276, 38.997037], [141.618003, 39.014407], [141.632447, 39.010124], [141.635834, 39.008718], [141.649953, 38.986759], [141.649285, 38.986696]]]}, {"lat": 39.015482, "lng": 141.630299, "name": "まちなか陸前高田", "name_kana": "まちなかりくぜんたかた", "radius": 0, "pt": 1, "coordinates": [[[141.635834, 39.008718], [141.632447, 39.010124], [141.626807, 39.020787], [141.633274, 39.02352], [141.634785, 39.021814], [141.635834, 39.008718]]]}];
    </script>
    
    <!-- メインスクリプト -->
    <script>
        // グローバル変数
        let map;
        let redMarkerCount = 0;
        let totalMarkerCount = markerData.length;
        let locationMarker = null;
        let radiusCircle = null;
        let isTracking = false;
        let isFollowing = false;
        let isFirstLocation = true;
        let userInteracted = false;
        const circles = [];
        const polygons = []; // Voronoiポリゴンを保存する配列
        
        // 定数
        const PREFIX = '20250428_';
        const ZOOM_THRESHOLD = 14;
        const DEFAULT_CENTER = [34.6510957,135.5084344];
        const DEFAULT_ZOOM = 5;
        const INITIAL_LOCATION_ZOOM = 16; // 初回の位置表示時のズームレベル
        
        // ドキュメント読み込み完了時の処理
        document.addEventListener('DOMContentLoaded', function() {
            initApp();
        });
        
        /**
         * アプリケーションの初期化
         */
        function initApp() {
            // マップの初期化
            initMap();
            
            // マーカーの初期化
            initMarkers();
            
            // 位置追跡ボタンの設定
            setupLocationTracking();
        }
        
        /**
         * マップを初期化する
         */
        function initMap() {
            map = L.map('map', {
                zoomSnap: 0.1,
                zoomDelta: 0.1,
                wheelPxPerZoomLevel: 120
            }).setView(DEFAULT_CENTER, DEFAULT_ZOOM);
            
            L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
            }).addTo(map);
            
            map.on('zoomend', updateVisibility);
            map.on('moveend', updateVisibility);
            map.on('locationfound', onLocationFound);
            map.on('locationerror', onLocationError);
            
            // ユーザーの操作を検知するイベントリスナー
            map.on('dragstart', onUserInteraction);
            map.on('zoomstart', onUserInteraction);
            map.on('touchstart', function(e) {
                // タッチ操作が2本指以上の場合（ピンチイン・ピンチアウト）
                if (e.originalEvent.touches && e.originalEvent.touches.length > 1) {
                    onUserInteraction();
                }
            });
        }
        
        /**
         * ユーザーの地図操作を検知したときの処理
         */
        function onUserInteraction() {
            if (isFollowing) {
                console.log("ユーザーによる地図操作を検知しました。追跡モードを終了します。");
                userInteracted = true;
                
                // 追跡モードを終了（位置情報の取得は継続）
                isFollowing = false;
                
                // ボタンの見た目を更新
                updateLocationButtonAppearance();
            }
        }
        
        /**
         * マーカーを初期化する
         */
        function initMarkers() {
            // 既存のredマーカーのカウント
            markerData.forEach(function(data) {
                const key = getStorageKey(data);
                if (localStorage.getItem(key) === 'red') {
                    redMarkerCount++;
                }
            });
            
            updateMarkerCount();
            
            // マーカーとサークル、ポリゴンの作成
            markerData.forEach(function(data) {
                createMarker(data);
            });
        }
        
        /**
         * 単一マーカーを作成する
         */
        function createMarker(data) {
            const key = getStorageKey(data);
            const searchKeyword = data.radius == 0 ? `${data.name}駅` : data.name;
            const nameHtml = createPopupContent(data, searchKeyword);
            
            const color = localStorage.getItem(key) === 'red' ? 'red' : 'blue';
            const loc = [data.lat, data.lng];
            const marker = L.marker(loc, { icon: createMarkerIcon(color) }).addTo(map)
                .bindPopup(nameHtml, {maxWidth: 300});
            
            // 半径を指定した円を描画
            if(data.radius > 0) {
                createCircles(loc, data.radius);
            }
            
            // Voronoiポリゴンを作成
            if(data.coordinates && data.coordinates.length > 0) {
                createVoronoiPolygon(data);
            }
            
            // イベントリスナーの設定
            setupMarkerEvents(marker, key);
        }

        /**
         * 円を作成（半径表示用）
         */
         function createCircles(location, radius) {
            if(radius < 50){ // 半径が小さいときは未確定とみなし 赤50m, 緑200mの円を描画
                const innerCircle = L.circle(location, {
                    color: 'red',
                    fillColor: '#f03',
                    fillOpacity: 0.15,
                    radius: 50
                });
                circles.push(innerCircle);
                radius = 200; // 外側の円(緑)は200mとする
            }
            
            const outerCircle = L.circle(location, {
                color: 'green',
                fillColor: '#3f0',
                fillOpacity: 0.15,
                radius: radius
            });
            circles.push(outerCircle);
        }
        
        /**
         * Voronoiポリゴンを作成
         */
        function createVoronoiPolygon(data) {
            if (!data.coordinates || data.coordinates.length === 0) {
                return;
            }
            
            // coordinates配列の最初の要素（外郭線）を使用
            const coords = data.coordinates[0];
            
            // [lng, lat] を [lat, lng] に変換
            const latLngs = coords.map(coord => [coord[1], coord[0]]);
            
            // ポリゴンを作成
            const polygon = L.polygon(latLngs, {
                color: '#8A2BE2',        // 紫色の境界線
                weight: 2,               // 境界線の太さ
                opacity: 0.8,            // 境界線の不透明度
                fillColor: '#DDA0DD',    // 薄紫色の塗りつぶし
                fillOpacity: 0.2         // 塗りつぶしの不透明度
            });
            
            // ポリゴンにポップアップを追加（マーカーと同じ内容）
            const searchKeyword = data.radius == 0 ? `${data.name}駅` : data.name;
            const nameHtml = createPopupContent(data, searchKeyword);
            polygon.bindPopup(nameHtml, {maxWidth: 300});
            
            // ポリゴン配列に追加
            polygons.push(polygon);
        }
        
        /**
         * マーカーのためのポップアップ内容を作成
         */
        function createPopupContent(data, searchKeyword) {
            const animals = ['十', '一', 'か', 'ぎ'];
            let highlightedName = data.name;
            
            animals.forEach(animal => {
                highlightedName = highlightedName.replace(
                    new RegExp(animal, 'g'), 
                    `<span style="color: red;">${animal}</span>`
                );
            });

            return '<div style="white-space: nowrap; text-align: center;">' + 
                `<div style="font-size: 16px;"><a href="https://x.com/search?q=%22${encodeURIComponent(searchKeyword)}%22&src=typed_query" target="_blank">${highlightedName}</a></div>` +
                `<div>${data.name_kana}</div></b></div>`;
        }
        
        /**
         * マーカーのイベントを設定
         */
        function setupMarkerEvents(marker, key) {
            // ダブルクリックイベント
            marker.on('dblclick', function() {
                toggleMarkerColor(key, marker);
            });
            
            // ダブルタップイベント（モバイル）
            marker.on('touchend', function(e) {
                if (e.originalEvent.detail === 2) {
                    toggleMarkerColor(key, marker);
                }
            });
            
            // ポップアップ内のタップ（iOS対応）
            marker.on('popupopen', function(e) {
                const popupElement = e.popup._container;
                popupElement.addEventListener('click', function(event) {
                    if (!event.target.classList.contains('leaflet-popup-close-button')){
                        toggleMarkerColor(key, marker);
                    }
                });
            });
        }
        
        /**
         * マーカーアイコンを作成
         */
        function createMarkerIcon(color) {
            return new L.Icon({
                iconUrl: `https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-${color}.png`,
                shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.4/images/marker-shadow.png',
                iconSize: [25, 41],
                iconAnchor: [12, 41],
                popupAnchor: [1, -34],
                shadowSize: [41, 41]
            });
        }
        
        /**
         * マーカーの色を切り替える
         */
        function toggleMarkerColor(key, marker) {
            if (localStorage.getItem(key) === 'red') {
                marker.setIcon(createMarkerIcon('blue'));
                localStorage.removeItem(key);
                redMarkerCount--;
            } else {
                marker.setIcon(createMarkerIcon('red'));
                localStorage.setItem(key, 'red');
                redMarkerCount++;
            }
            updateMarkerCount();
        }
        
        /**
         * マーカー数の表示を更新
         */
        function updateMarkerCount() {
            document.getElementById('red-markers-count').textContent = redMarkerCount;
            document.getElementById('total-markers-count').textContent = totalMarkerCount;
        }
        
        /**
         * ズームレベルに応じて円とポリゴンの表示を更新
         */
        function updateVisibility() {
            const currentZoom = map.getZoom();
            
            // 円の表示/非表示
            circles.forEach(function(circle) {
                if (currentZoom > ZOOM_THRESHOLD) {
                    if (!map.hasLayer(circle)) {
                        circle.addTo(map);
                    }
                } else {
                    if (map.hasLayer(circle)) {
                        map.removeLayer(circle);
                    }
                }
            });
            
            // ポリゴンの表示/非表示
            polygons.forEach(function(polygon) {
                if (currentZoom > ZOOM_THRESHOLD) {
                    if (!map.hasLayer(polygon)) {
                        polygon.addTo(map);
                    }
                } else {
                    if (map.hasLayer(polygon)) {
                        map.removeLayer(polygon);
                    }
                }
            });
        }
        
        /**
         * ストレージキーを取得
         */
        function getStorageKey(data) {
            return PREFIX + data.lat + "_" + data.lng;
        }
        
        /**
         * 位置追跡機能の設定
         */
        function setupLocationTracking() {
            const locationButton = document.getElementById('location-button');
            
            locationButton.addEventListener('click', function() {
                toggleLocationTracking();
            });
            
            // ボタンのタッチイベント
            locationButton.addEventListener('touchend', function() {
                this.style.boxShadow = '0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24)';
            });
        }
        
        /**
         * 位置追跡ボタンの見た目を更新
         */
        function updateLocationButtonAppearance() {
            const locationButton = document.getElementById('location-button');
            
            if (isFollowing) {
                locationButton.classList.add('following');
            } else {
                locationButton.classList.remove('following');
            }
        }
        
        /**
         * 位置追跡の切り替え
         */
        function toggleLocationTracking() {
            if (!isTracking) {
                // トラッキング開始
                map.locate({ watch: true, maxZoom: INITIAL_LOCATION_ZOOM });
                isTracking = true;
                isFollowing = true;
                isFirstLocation = true;
                userInteracted = false;
                
                if (locationMarker && radiusCircle) {
                    map.addLayer(locationMarker);
                    map.addLayer(radiusCircle);
                }
            } else if (isTracking && !isFollowing) {
                // 追跡モードのみ再開（現在のズームレベルを維持）
                isFollowing = true;
                userInteracted = false;
                
                // 現在地に移動（ズームレベルはそのまま）
                if (locationMarker) {
                    // ズーム率を変更せずに中心位置のみ移動
                    map.panTo(locationMarker.getLatLng());
                }
            } else {
                // トラッキング停止
                map.stopLocate();
                isTracking = false;
                isFollowing = false;
                
                if (locationMarker && radiusCircle) {
                    map.removeLayer(locationMarker);
                    map.removeLayer(radiusCircle);
                }
            }
            
            // ボタンの見た目を更新
            updateLocationButtonAppearance();
        }
        
        /**
         * 位置が見つかった時のイベントハンドラ
         */
        function onLocationFound(e) {
            const radius = e.accuracy / 2;
            
            if (locationMarker) {
                // 既存のマーカーの位置を更新
                locationMarker.setLatLng(e.latlng);
                radiusCircle.setLatLng(e.latlng);
                radiusCircle.setRadius(radius);
            } else {
                // 初回のみマーカーを作成
                const pulsingIcon = L.divIcon({
                    className: 'blinking',
                    html: '<div style="background-color: rgba(0, 0, 255, 0.5); width: 20px; height: 20px; border-radius: 50%;"></div>',
                    iconSize: [20, 20]
                });
                
                locationMarker = L.marker(e.latlng, { icon: pulsingIcon });
                radiusCircle = L.circle(e.latlng, radius);
                
                // 表示状態がオンの場合のみ追加
                if (isTracking) {
                    map.addLayer(locationMarker);
                    map.addLayer(radiusCircle);
                }
            }
            
            // 追跡モードが有効かつユーザーによる操作がない場合、地図を現在位置に移動
            if (isTracking && isFollowing && !userInteracted) {
                if (isFirstLocation) {
                    // 初回は指定のズームレベルで表示
                    map.setView(e.latlng, INITIAL_LOCATION_ZOOM);
                    isFirstLocation = false;
                } else {
                    // 以降は現在のズームレベルを維持して位置のみ移動
                    map.panTo(e.latlng);
                }
            }
        }
        
        /**
         * 位置取得エラー時のイベントハンドラ
         */
        function onLocationError(e) {
            alert('位置情報を取得できませんでした。');
            isTracking = false;
            isFollowing = false;
            updateLocationButtonAppearance();
        }
    </script>
</body>
</html>